import{decorateMain as f}from"../../scripts/scripts.min.js";import{loadBlocks as m}from"../../scripts/aem.min.js";export async function loadFragment(t){const i=!t.startsWith("/")&&new URL(t),o=new URL(window.location.href),e=i.origin===o.origin;if(t&&(e||t.startsWith("/"))){const n=await fetch(`${t}.plain.html`);if(n.ok){const r=document.createElement("main");r.innerHTML=await n.text();const c=(l,s)=>{r.querySelectorAll(`${l}[${s}^="./media_"]`).forEach(a=>{a[s]=new URL(a.getAttribute(s),new URL(t,window.location)).href})};return c("img","src"),c("source","srcset"),f(r),await m(r),r}}return null}export default async function u(t){const i=t.querySelector("a"),o=i?i.getAttribute("href"):t.textContent.trim(),e=await loadFragment(o);if(e){const n=e.querySelector(":scope .section");n&&(t.closest(".section").classList.add(...n.classList),t.closest(".fragment").replaceWith(...e.childNodes))}}
