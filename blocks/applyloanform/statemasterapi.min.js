import{workFlowStatemaster as p,stateMasterProcessApiData as u,stateMasterProcessGraphqlData as d}from"./statemasterbiz.min.js";import{fetchAPI as f}from"../../scripts/common.min.js";export function stateMasterApi(){const a=document.querySelector(".loan-form-sub-parent");let t=[];const o=document.querySelectorAll(".expert"),r=document.querySelector("#loan-banner .cmp-teaser__content .cmp-teaser__action-container .cmp-teaser__action-link"),c=document.querySelector(".cmp-container--documentrequired .cmp-container .extendedbutton"),l=document.getElementById("sticky-btn-loan-form"),m=document.querySelectorAll(".cmp-container--branches .cmp-contentfragmentlist .cmp-contentfragment .cmp-contentfragment__elements .cmp-contentfragment__element--ctaName .cmp-contentfragment__element-value"),e=document.querySelectorAll(".open-form-btn");t=[...o,r,c,l,...m,...e],t.filter(n=>n!=null).forEach(n=>{n.addEventListener("click",y=>{a.dataset.stateMaster!="true"&&(statemasterGetStatesApi().catch(i=>{console.warn(i)}),a.dataset.stateMaster=!0)})}),sessionStorage.removeItem("allowedType")}export function statemasterGetStatesApi(a){const t=["pl","las","lamf"].includes(a),o="/api/state-city-master/personal-loan-state-city-master.json",r=window.location.href.includes("localhost")?"https://www.piramalfinance.com/graphql/execute.json/piramalfinance/State%20City%20Master":"/graphql/execute.json/piramalfinance/State%20City%20Master",c=t?o:r;return new Promise((l,m)=>{f("GET",c).then(async e=>{const s=await e.json(),n=t?u(s.data):d(s.data.statemasterList.items);p(n)}).catch(e=>{console.warn(e)})})}
