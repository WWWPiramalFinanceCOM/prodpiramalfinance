const A="js",P="css";function i(t,e={}){const o="aem-rum";i.baseURL=i.baseURL||new URL(window.RUM_BASE==null?"https://rum.hlx.page":window.RUM_BASE,window.location),i.defer=i.defer||[];const n=s=>{i[s]=i[s]||((...a)=>i.defer.push({fnname:s,args:a}))};i.drain=i.drain||((s,a)=>{i[s]=a,i.defer.filter(({fnname:r})=>s===r).forEach(({fnname:r,args:l})=>i[r](...l))}),i.always=i.always||[],i.always.on=(s,a)=>{i.always[s]=a},i.on=(s,a)=>{i.cases[s]=a},n("observe"),n("cwv");try{if(window.hlx=window.hlx||{},!window.hlx.rum){const c=new URLSearchParams(window.location.search).get("rum")==="on"?1:100,d=Array.from({length:75},(x,B)=>String.fromCharCode(48+B)).filter(x=>/\d|[A-Z]/i.test(x)).filter(()=>Math.random()*75>70).join(""),u=Math.random(),h=u*c<1,f=window.performance?window.performance.timeOrigin:Date.now(),N={full:()=>window.location.href,origin:()=>window.location.origin,path:()=>window.location.href.replace(/\?.*$/,"")},m=sessionStorage.getItem(o)?JSON.parse(sessionStorage.getItem(o)):{};m.pages=(m.pages?m.pages:0)+1+(Math.floor(Math.random()*20)-10),sessionStorage.setItem(o,JSON.stringify(m)),window.hlx.rum={weight:c,id:d,random:u,isSelected:h,firstReadTime:f,sampleRUM:i,sanitizeURL:N[window.hlx.RUM_MASK_URL||"path"],rumSessionStorage:m}}const{weight:s,id:a,firstReadTime:r}=window.hlx.rum;if(window.hlx&&window.hlx.rum&&window.hlx.rum.isSelected){const l=["weight","id","referer","checkpoint","t","source","target","cwv","CLS","FID","LCP","INP","TTFB"],c=(d=e)=>{const u=Math.round(window.performance?window.performance.now():Date.now()-r),h=JSON.stringify({weight:s,id:a,referer:window.hlx.rum.sanitizeURL(),checkpoint:t,t:u,...e},l),f=new URL(`.rum/${s}`,i.baseURL).href;navigator.sendBeacon(f,h),console.debug(`ping:${t}`,d)};i.cases=i.cases||{load:()=>i("pagesviewed",{source:window.hlx.rum.rumSessionStorage.pages})||!0,cwv:()=>i.cwv(e)||!0,lazy:()=>{const d=document.createElement("script");return d.src=new URL(".rum/@adobe/helix-rum-enhancer@^1/src/index.min.js",i.baseURL).href,document.head.appendChild(d),!0}},c(e),i.cases[t]&&i.cases[t]()}i.always[t]&&i.always[t](e)}catch{}}function $(){window.hlx=window.hlx||{},window.hlx.RUM_MASK_URL="full",window.hlx.codeBasePath="",window.hlx.lighthouse=new URLSearchParams(window.location.search).get("lighthouse")==="on";const t=document.querySelector('script[src$="/scripts/scripts.min.js"]');if(t)try{const e=new URL(t.src,window.location);e.host===window.location.host?[window.hlx.codeBasePath]=e.pathname.split("/scripts/scripts.min.js"):[window.hlx.codeBasePath]=e.href.split("/scripts/scripts.min.js")}catch(e){console.warn(e)}}function v(){$(),i("top"),window.addEventListener("load",()=>i("load")),window.addEventListener("unhandledrejection",t=>{i("error",{source:t.reason.sourceURL,target:t.reason.line})}),window.addEventListener("error",t=>{i("error",{source:t.filename,target:t.lineno})})}function p(t){return typeof t=="string"?t.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}function S(t){return p(t).replace(/-([a-z])/g,e=>e[1].toUpperCase())}function b(t){const e={};return t.querySelectorAll(":scope > div").forEach(o=>{if(o.children){const n=[...o.children];if(n[1]){const s=n[1],a=p(n[0].textContent);let r="";if(s.querySelector("a")){const l=[...s.querySelectorAll("a")];l.length===1?r=l[0].href:r=l.map(c=>c.href)}else if(s.querySelector("img")){const l=[...s.querySelectorAll("img")];l.length===1?r=l[0].src:r=l.map(c=>c.src)}else if(s.querySelector("p")){const l=[...s.querySelectorAll("p")];l.length===1?r=l[0].textContent:r=l.map(c=>c.textContent)}else r=o.children[1].textContent;e[a]=r}}}),e}function C(t,e){if(e)if(document.querySelector(`head > link[href="${t}"]`))typeof e=="function"&&e("noop");else{const o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("href",t),typeof e=="function"&&(o.onload=n=>e(n.type),o.onerror=n=>e(n.type)),document.head.appendChild(o)}else return new Promise((o,n)=>{if(document.querySelector(`head > link[href="${t}"]`))o();else{const s=document.createElement("link");s.rel="stylesheet",s.href=t,s.onload=o,s.onerror=n,document.head.append(s)}})}async function q(t,e){return new Promise((o,n)=>{if(document.querySelector(`head > script[src="${t}"]`))o();else{const s=document.createElement("script");if(s.src=t,e)for(const a in e)s.setAttribute(a,e[a]);s.onload=o,s.onerror=n,document.head.append(s)}})}function w(t,e=document){const o=t&&t.includes(":")?"property":"name";return[...e.head.querySelectorAll(`meta[${o}="${t}"]`)].map(s=>s.content).join(", ")||""}function k(t,e="",o=!1,n=[{media:"(min-width: 600px)",width:"2000"},{width:"750"}]){const s=new URL(t,window.location.href),a=document.createElement("picture"),{pathname:r}=s,l=r.substring(r.lastIndexOf(".")+1);return n.forEach(c=>{const d=document.createElement("source");c.media&&d.setAttribute("media",c.media),d.setAttribute("type","image/webp"),d.setAttribute("srcset",`${r}?width=${c.width}&format=webply&optimize=medium`),a.appendChild(d)}),n.forEach((c,d)=>{if(d<n.length-1){const u=document.createElement("source");c.media&&u.setAttribute("media",c.media),u.setAttribute("srcset",`${r}?width=${c.width}&format=${l}&optimize=medium`),a.appendChild(u)}else{const u=document.createElement("img");u.setAttribute("loading",o?"eager":"lazy"),u.setAttribute("alt",e),a.appendChild(u),u.setAttribute("src",`${r}?width=${c.width}&format=${l}&optimize=medium`)}}),a}function j(){const t=(n,s)=>{s.split(",").forEach(a=>{n.classList.add(p(a.trim()))})},e=w("template");e&&t(document.body,e);const o=w("theme");o&&t(document.body,o)}function R(t){const e=["P","PRE","UL","OL","PICTURE","TABLE","H1","H2","H3","H4","H5","H6"],o=n=>{const s=document.createElement("p");s.append(...n.childNodes),[...n.attributes].filter(({nodeName:a})=>a==="class"||a.startsWith("data-aue")||a.startsWith("data-richtext")).forEach(({nodeName:a,nodeValue:r})=>{s.setAttribute(a,r),n.removeAttribute(a)}),n.append(s)};t.querySelectorAll(":scope > div > div").forEach(n=>{n.hasChildNodes()&&(!!n.firstElementChild&&e.some(a=>n.firstElementChild.tagName===a)?n.firstElementChild.tagName==="PICTURE"&&(n.children.length>1||n.textContent.trim())&&o(n):o(n))})}export function addRefAttribute(t){try{t.hasAttribute("href")&&t.href.includes("rel=")&&(t.setAttribute("rel",getRelParam(t)),t.setAttribute("href",removeRelParam(t)),t.textContent=t.textContent.replace(/([?&])?rel=[^&\s]*/gi,"").replace(/[?&]$/,""),t.setAttribute("title",t.getAttribute("title")))}catch(e){console.warn(e)}}export function autoLinkLangPaths(t){Array.from(t).forEach(function(e){autoLinkLangPath(e)})}export function autoLinkLangPath(t){try{if(t.href){addRefAttribute(t);const e=new URL(t.href),o=new URL(window.location.href),n=w("lang-path"),s=["/hi/","/mr/","/gu/","/te/","/ta/","/ml/","/kn/","/content/","/account/","/customer-service/","/neeyat"],a=["english","\u0939\u093F\u0928\u094D\u0926\u0940","\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0","\u092E\u0930\u093E\u0920\u0940","\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD","\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02","\u0C95\u0CA8\u0CCD\u0CA8\u0CA1","\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41"],r=t.textContent.trim().toLowerCase(),l=e.origin===o.origin,c=e.pathname.startsWith("/"),d=s.some(f=>e.pathname.includes(f)),u=a.includes(r);let h=t.href;if(l&&c&&!d&&!u)if(h.includes("#")){let f=t.href.split("#");h=f[1]?"#"+f[1]:"#"}else h=n+e.pathname+e.search;else if(u){const f=n&&o.pathname.startsWith(n)?o.pathname.split("/").slice(2):o.pathname.split("/").slice(1);f.length>1?h=e.pathname+"/"+f.join("/")+e.search:h=n?e.pathname.split("/").slice(0,-1).join("/")+"/"+o.pathname.split("/").slice(2).join("/")+e.search:e.pathname.split("/").slice(0,-1).join("/")+o.pathname+e.search,h=h.replaceAll("//","/")}t.href=h}}catch(e){console.warn("autoLinkLangPath error:",e)}}function U(t){t.querySelectorAll("a").forEach(e=>{if(e.title=e.title||e.textContent,autoLinkLangPath(e),e.href!==e.textContent){const o=e.parentElement,n=e.parentElement.parentElement;e.querySelector("img")||(o.childNodes.length===1&&(o.tagName==="P"||o.tagName==="DIV")&&(e.className="button",o.classList.add("button-container")),o.childNodes.length===1&&o.tagName==="STRONG"&&n.childNodes.length===1&&n.tagName==="P"&&(e.className="button primary",n.classList.add("button-container")),o.childNodes.length===1&&o.tagName==="EM"&&n.childNodes.length===1&&n.tagName==="P"&&(e.className="button secondary",n.classList.add("button-container")))}})}export function removeRelParam(t){try{const e=new URL(t.href);return e.searchParams.delete("rel"),e.toString()}catch{return url}}export function getRelParam(t){try{return new URL(t.href).searchParams.get("rel")}catch{return url}}function M(t,e="",o=""){const n=Array.from(t.classList).find(a=>a.startsWith("icon-")).substring(5),s=document.createElement("img");s.dataset.iconName=n,s.src=`${window.hlx.codeBasePath}${e}/icons/${n}.svg`,s.alt=o,s.loading="lazy",t.append(s)}function T(t,e=""){[...t.querySelectorAll("span.icon")].forEach(n=>{M(n,e)})}function z(t){t.querySelectorAll(":scope > div:not([data-section-status])").forEach(e=>{const o=[];let n=!1;[...e.children].forEach(a=>{if(a.tagName==="DIV"||!n){const r=document.createElement("div");o.push(r),n=a.tagName!=="DIV",n&&r.classList.add("default-content-wrapper")}o[o.length-1].append(a)}),o.forEach(a=>e.append(a)),e.classList.add("section"),e.dataset.sectionStatus="initialized",e.style.display="none";const s=e.querySelector("div.section-metadata");if(s){const a=b(s);Object.keys(a).forEach(r=>{r==="style"?a.style.split(",").filter(c=>c).map(c=>p(c.trim())).forEach(c=>e.classList.add(c)):e.dataset[S(r)]=a[r]}),s.parentNode.remove()}})}async function I(t="default"){return window.placeholders=window.placeholders||{},window.placeholders[t]||(window.placeholders[t]=new Promise(e=>{fetch(`${t==="default"?"":t}/api/placeholder.json`).then(o=>o.ok?o.json():{}).then(o=>{const n={};o.data.filter(s=>s.Key).forEach(s=>{n[S(s.Key)]=s.Text}),window.placeholders[t]=n,e(window.placeholders[t])}).catch(()=>{window.placeholders[t]={},e(window.placeholders[t])})})),window.placeholders[`${t}`]}function E(t){const e=[...t.querySelectorAll(":scope > div.section")];for(let o=0;o<e.length;o+=1){const n=e[o];if(n.dataset.sectionStatus!=="loaded")if(n.querySelector('.block[data-block-status="initialized"], .block[data-block-status="loading"]')){n.dataset.sectionStatus="loading";break}else n.dataset.sectionStatus="loaded",n.style.display=null}}function L(t,e){const o=Array.isArray(e)?e:[[e]],n=document.createElement("div");return n.classList.add(t),o.forEach(s=>{const a=document.createElement("div");s.forEach(r=>{const l=document.createElement("div");(r.elems?r.elems:[r]).forEach(d=>{d&&(typeof d=="string"?l.innerHTML+=d:l.appendChild(d))}),a.appendChild(l)}),n.appendChild(a)}),n}export function getExtension(t){const e=w("minify")==="true";if(t==="js")return e?`.min.${A}`:`.${A}`;if(t==="css")return e?`.min.${P}`:`.${P}`}async function g(t){const e=t.dataset.blockStatus;if(e!=="loading"&&e!=="loaded"){t.dataset.blockStatus="loading";const{blockName:o}=t.dataset;try{if(!o)throw Error(`Block Name is ${o}`);const n=C(`${window.hlx.codeBasePath}/blocks/${o}/${o}${getExtension("css")}`),s=new Promise(a=>{(async()=>{try{const r=await import(`${window.hlx.codeBasePath}/blocks/${o}/${o}${getExtension("js")}`);r.default&&await r.default(t)}catch(r){console.warn(`failed to load module for ${o}`,r)}a()})()});await Promise.all([n,s])}catch(n){console.warn(`failed to load block ${o}`,n)}t.dataset.blockStatus="loaded"}return t}async function O(t){E(t);const e=[...t.querySelectorAll("div.block")];for(let o=0;o<e.length;o+=1)await g(e[o]),E(t)}function y(t){const e=t.classList[0];if(e&&!t.dataset.blockStatus){t.classList.add("block"),t.dataset.blockName=e,t.dataset.blockStatus="initialized",R(t),t.parentElement.classList.add(`${e}-wrapper`);const n=t.closest(".section");n&&n.classList.add(`${e}-container`),U(t)}}function H(t){t.querySelectorAll("div.section > div > div").forEach(y)}async function W(t){const e=L("header","");return t.append(e),y(e),g(e)}async function _(t){const e=L("footer","");return t.append(e),y(e),g(e)}async function D(t){const e=document.querySelector(".block");e&&t.includes(e.dataset.blockName)&&await g(e),document.body.style.display=null;const n=document.querySelector("main img");await new Promise(s=>{n&&!n.complete?(n.setAttribute("loading","eager"),n.addEventListener("load",s),n.addEventListener("error",s)):s()})}v();export{L as buildBlock,k as createOptimizedPicture,y as decorateBlock,H as decorateBlocks,U as decorateButtons,T as decorateIcons,z as decorateSections,j as decorateTemplateAndTheme,I as fetchPlaceholders,w as getMetadata,g as loadBlock,O as loadBlocks,C as loadCSS,_ as loadFooter,W as loadHeader,q as loadScript,b as readBlockConfig,i as sampleRUM,$ as setup,S as toCamelCase,p as toClassName,E as updateSectionsStatus,D as waitForLCP,R as wrapTextNodes};
